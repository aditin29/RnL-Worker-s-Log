{"ast":null,"code":"import _objectSpread from\"C:/Users/aditi/rocks-and-logs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{AUTH_ERROR,ADMIN_LOADED,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT}from\"../actions/types\";var initialState={token:localStorage.getItem('token'),isAuthenticated:null,loading:true,admin:null,error:null};export default function authentication(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload,errMsg=action.errMsg;switch(type){case ADMIN_LOADED:return _objectSpread(_objectSpread({},state),{},{isAuthenticated:true,loading:false,admin:payload,error:null});case LOGIN_SUCCESS:localStorage.setItem('token',payload.token);return _objectSpread(_objectSpread(_objectSpread({},state),payload),{},{isAuthenticated:true,loading:false,error:null});case AUTH_ERROR:case LOGIN_FAIL:case LOGOUT://localStorage.removeItem('token');         \nreturn _objectSpread(_objectSpread({},state),{},{token:null,isAuthenticated:false,loading:false,admin:null,error:errMsg});default:return state;}}","map":{"version":3,"sources":["C:/Users/aditi/rocks-and-logs/client/src/reducers/auth.js"],"names":["AUTH_ERROR","ADMIN_LOADED","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","initialState","token","localStorage","getItem","isAuthenticated","loading","admin","error","authentication","state","action","type","payload","errMsg","setItem"],"mappings":"0JAAA,OAASA,UAAT,CAAqBC,YAArB,CAAmCC,aAAnC,CAAkDC,UAAlD,CAA8DC,MAA9D,KAA4E,kBAA5E,CAGA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,KAAK,CAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADU,CAEjBC,eAAe,CAAE,IAFA,CAGjBC,OAAO,CAAE,IAHQ,CAIjBC,KAAK,CAAE,IAJU,CAKjBC,KAAK,CAAE,IALU,CAArB,CASA,cAAe,SAASC,CAAAA,cAAT,EAAsD,IAA9BC,CAAAA,KAA8B,2DAAtBT,YAAsB,IAARU,CAAAA,MAAQ,2CACjE,GAAOC,CAAAA,IAAP,CAAgCD,MAAhC,CAAOC,IAAP,CAAaC,OAAb,CAAgCF,MAAhC,CAAaE,OAAb,CAAsBC,MAAtB,CAAgCH,MAAhC,CAAsBG,MAAtB,CAEA,OAAOF,IAAP,EACI,IAAKf,CAAAA,YAAL,CACI,sCACOa,KADP,MAEIL,eAAe,CAAE,IAFrB,CAGIC,OAAO,CAAE,KAHb,CAIIC,KAAK,CAAEM,OAJX,CAKIL,KAAK,CAAE,IALX,GASJ,IAAKV,CAAAA,aAAL,CACIK,YAAY,CAACY,OAAb,CAAqB,OAArB,CAA8BF,OAAO,CAACX,KAAtC,EACA,oDACOQ,KADP,EAEOG,OAFP,MAGIR,eAAe,CAAE,IAHrB,CAIIC,OAAO,CAAC,KAJZ,CAKIE,KAAK,CAAE,IALX,GASJ,IAAKZ,CAAAA,UAAL,CACA,IAAKG,CAAAA,UAAL,CACA,IAAKC,CAAAA,MAAL,CACI;AACA,sCACOU,KADP,MAEIR,KAAK,CAAE,IAFX,CAGIG,eAAe,CAAE,KAHrB,CAIIC,OAAO,CAAE,KAJb,CAKIC,KAAK,CAAE,IALX,CAMIC,KAAK,CAAEM,MANX,GAYJ,QACI,MAAOJ,CAAAA,KAAP,CAvCR,CAyCH","sourcesContent":["import { AUTH_ERROR, ADMIN_LOADED, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT } from \"../actions/types\";\r\n\r\n\r\nconst initialState = {\r\n    token: localStorage.getItem('token'),\r\n    isAuthenticated: null,\r\n    loading: true,\r\n    admin: null,\r\n    error: null\r\n}\r\n\r\n\r\nexport default function authentication(state = initialState, action) {\r\n    const {type, payload, errMsg} = action;\r\n\r\n    switch(type) {\r\n        case ADMIN_LOADED: \r\n            return {\r\n                ...state,\r\n                isAuthenticated: true,\r\n                loading: false,\r\n                admin: payload,\r\n                error: null\r\n            };\r\n\r\n\r\n        case LOGIN_SUCCESS: \r\n            localStorage.setItem('token', payload.token);            \r\n            return {\r\n                ...state,\r\n                ...payload,\r\n                isAuthenticated: true,\r\n                loading:false,\r\n                error: null\r\n\r\n        };\r\n        \r\n        case AUTH_ERROR:\r\n        case LOGIN_FAIL:\r\n        case LOGOUT:    \r\n            //localStorage.removeItem('token');         \r\n            return {\r\n                ...state,\r\n                token: null,\r\n                isAuthenticated: false,\r\n                loading: false,\r\n                admin: null,\r\n                error: errMsg\r\n            };\r\n        \r\n        \r\n        \r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}