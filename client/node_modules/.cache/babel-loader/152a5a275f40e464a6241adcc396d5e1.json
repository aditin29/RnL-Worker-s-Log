{"ast":null,"code":"import { AUTH_ERROR, ADMIN_LOADED, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT } from \"../actions/types\";\nconst initialState = {\n  token: localStorage.getItem('token'),\n  isAuthenticated: null,\n  loading: true,\n  admin: null,\n  error: null\n};\nexport default function authentication(state = initialState, action) {\n  const {\n    type,\n    payload,\n    errMsg\n  } = action;\n\n  switch (type) {\n    case ADMIN_LOADED:\n      return { ...state,\n        isAuthenticated: true,\n        loading: false,\n        admin: payload,\n        error: null\n      };\n\n    case LOGIN_SUCCESS:\n      localStorage.setItem('token', payload.token);\n      return { ...state,\n        ...payload,\n        isAuthenticated: true,\n        loading: false,\n        error: null\n      };\n\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n      //localStorage.removeItem('token');         \n      return { ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false,\n        admin: null,\n        error: errMsg\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["C:/Users/aditi/rocks-and-logs/client/src/reducers/auth.js"],"names":["AUTH_ERROR","ADMIN_LOADED","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","initialState","token","localStorage","getItem","isAuthenticated","loading","admin","error","authentication","state","action","type","payload","errMsg","setItem"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,YAArB,EAAmCC,aAAnC,EAAkDC,UAAlD,EAA8DC,MAA9D,QAA4E,kBAA5E;AAGA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADU;AAEjBC,EAAAA,eAAe,EAAE,IAFA;AAGjBC,EAAAA,OAAO,EAAE,IAHQ;AAIjBC,EAAAA,KAAK,EAAE,IAJU;AAKjBC,EAAAA,KAAK,EAAE;AALU,CAArB;AASA,eAAe,SAASC,cAAT,CAAwBC,KAAK,GAAGT,YAAhC,EAA8CU,MAA9C,EAAsD;AACjE,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA,OAAP;AAAgBC,IAAAA;AAAhB,MAA0BH,MAAhC;;AAEA,UAAOC,IAAP;AACI,SAAKf,YAAL;AACI,aAAO,EACH,GAAGa,KADA;AAEHL,QAAAA,eAAe,EAAE,IAFd;AAGHC,QAAAA,OAAO,EAAE,KAHN;AAIHC,QAAAA,KAAK,EAAEM,OAJJ;AAKHL,QAAAA,KAAK,EAAE;AALJ,OAAP;;AASJ,SAAKV,aAAL;AACIK,MAAAA,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8BF,OAAO,CAACX,KAAtC;AACA,aAAO,EACH,GAAGQ,KADA;AAEH,WAAGG,OAFA;AAGHR,QAAAA,eAAe,EAAE,IAHd;AAIHC,QAAAA,OAAO,EAAC,KAJL;AAKHE,QAAAA,KAAK,EAAE;AALJ,OAAP;;AASJ,SAAKZ,UAAL;AACA,SAAKG,UAAL;AACA,SAAKC,MAAL;AACI;AACA,aAAO,EACH,GAAGU,KADA;AAEHR,QAAAA,KAAK,EAAE,IAFJ;AAGHG,QAAAA,eAAe,EAAE,KAHd;AAIHC,QAAAA,OAAO,EAAE,KAJN;AAKHC,QAAAA,KAAK,EAAE,IALJ;AAMHC,QAAAA,KAAK,EAAEM;AANJ,OAAP;;AAYJ;AACI,aAAOJ,KAAP;AAvCR;AAyCH","sourcesContent":["import { AUTH_ERROR, ADMIN_LOADED, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT } from \"../actions/types\";\r\n\r\n\r\nconst initialState = {\r\n    token: localStorage.getItem('token'),\r\n    isAuthenticated: null,\r\n    loading: true,\r\n    admin: null,\r\n    error: null\r\n}\r\n\r\n\r\nexport default function authentication(state = initialState, action) {\r\n    const {type, payload, errMsg} = action;\r\n\r\n    switch(type) {\r\n        case ADMIN_LOADED: \r\n            return {\r\n                ...state,\r\n                isAuthenticated: true,\r\n                loading: false,\r\n                admin: payload,\r\n                error: null\r\n            };\r\n\r\n\r\n        case LOGIN_SUCCESS: \r\n            localStorage.setItem('token', payload.token);            \r\n            return {\r\n                ...state,\r\n                ...payload,\r\n                isAuthenticated: true,\r\n                loading:false,\r\n                error: null\r\n\r\n        };\r\n        \r\n        case AUTH_ERROR:\r\n        case LOGIN_FAIL:\r\n        case LOGOUT:    \r\n            //localStorage.removeItem('token');         \r\n            return {\r\n                ...state,\r\n                token: null,\r\n                isAuthenticated: false,\r\n                loading: false,\r\n                admin: null,\r\n                error: errMsg\r\n            };\r\n        \r\n        \r\n        \r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}