{"ast":null,"code":"import{createStore,applyMiddleware}from\"redux\";import{composeWithDevTools}from'redux-devtools-extension';import thunk from'redux-thunk';import rootReducer from'./reducers';import setAuthToken from'./utils/setAuthToken';var initialState={};var middleware=[thunk];var store=createStore(rootReducer,initialState,composeWithDevTools(applyMiddleware.apply(void 0,middleware)));// set up a store subscription listener\n// to store the users token in localStorage\n// initialize current state from redux store for subscription comparison\n// preventing undefined error\nvar currentState=store.getState();store.subscribe(function(){// keep track of the previous and current state to compare changes\nvar previousState=currentState;currentState=store.getState();// if the token changes set the value in localStorage and axios headers\nif(previousState.auth.token!==currentState.auth.token){var token=currentState.auth.token;setAuthToken(token);}});export default store;","map":{"version":3,"sources":["C:/Users/aditi/rocks-and-logs/client/src/store.js"],"names":["createStore","applyMiddleware","composeWithDevTools","thunk","rootReducer","setAuthToken","initialState","middleware","store","currentState","getState","subscribe","previousState","auth","token"],"mappings":"AAAA,OAASA,WAAT,CAAsBC,eAAtB,KAA6C,OAA7C,CACA,OAASC,mBAAT,KAAoC,0BAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,YAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,CAGA,GAAMC,CAAAA,YAAY,CAAG,EAArB,CAEA,GAAMC,CAAAA,UAAU,CAAG,CAACJ,KAAD,CAAnB,CAIA,GAAMK,CAAAA,KAAK,CAAGR,WAAW,CACrBI,WADqB,CAErBE,YAFqB,CAGrBJ,mBAAmB,CAACD,eAAe,MAAf,QAAmBM,UAAnB,CAAD,CAHE,CAAzB,CAOA;AACA;AAEA;AACA;AACA,GAAIE,CAAAA,YAAY,CAAGD,KAAK,CAACE,QAAN,EAAnB,CAEAF,KAAK,CAACG,SAAN,CAAgB,UAAM,CACpB;AACA,GAAIC,CAAAA,aAAa,CAAGH,YAApB,CACAA,YAAY,CAAGD,KAAK,CAACE,QAAN,EAAf,CACA;AACA,GAAIE,aAAa,CAACC,IAAd,CAAmBC,KAAnB,GAA6BL,YAAY,CAACI,IAAb,CAAkBC,KAAnD,CAA0D,CACxD,GAAMA,CAAAA,KAAK,CAAGL,YAAY,CAACI,IAAb,CAAkBC,KAAhC,CACAT,YAAY,CAACS,KAAD,CAAZ,CACD,CACF,CATD,EAWA,cAAeN,CAAAA,KAAf","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\nimport setAuthToken from './utils/setAuthToken';\r\n\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\n\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    composeWithDevTools(applyMiddleware(...middleware))\r\n);\r\n\r\n\r\n// set up a store subscription listener\r\n// to store the users token in localStorage\r\n\r\n// initialize current state from redux store for subscription comparison\r\n// preventing undefined error\r\nlet currentState = store.getState();\r\n\r\nstore.subscribe(() => {\r\n  // keep track of the previous and current state to compare changes\r\n  let previousState = currentState;\r\n  currentState = store.getState();\r\n  // if the token changes set the value in localStorage and axios headers\r\n  if (previousState.auth.token !== currentState.auth.token) {\r\n    const token = currentState.auth.token;\r\n    setAuthToken(token);\r\n  }\r\n});\r\n\r\nexport default store;\r\n"]},"metadata":{},"sourceType":"module"}