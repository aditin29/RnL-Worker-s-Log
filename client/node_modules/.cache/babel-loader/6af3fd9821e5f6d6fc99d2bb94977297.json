{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aditi/rocks-and-logs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/aditi/rocks-and-logs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/aditi/rocks-and-logs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Navbar from'../Components/Navbar';import'./Workers.css';import{Link}from'react-router-dom';import axios from'axios';import Profile from'../Popups/Profile';import Attendance from'../Popups/Attendance';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import Advance from'../Popups/Advance';import CreateIcon from'@material-ui/icons/Create';import EditProfile from'../Popups/EditProfile';import EditDetails from'../Popups/EditDetails';//import api from '../utils/api'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Workers(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),workers=_useState2[0],setWorkers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),trigProfile=_useState4[0],setTrigProfile=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),trigAtt=_useState6[0],setTrigAtt=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),trigAdv=_useState8[0],setTrigAdv=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),edit=_useState10[0],setEdit=_useState10[1];var _useState11=useState('pdetails'),_useState12=_slicedToArray(_useState11,2),editDetails=_useState12[0],setEditDetails=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),editOpt=_useState14[0],setEditOpt=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),worker=_useState16[0],setWorker=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),sites=_useState18[0],setSites=_useState18[1];var _useState19=useState('All'),_useState20=_slicedToArray(_useState19,2),sortSiteVal=_useState20[0],setSortSiteVal=_useState20[1];useEffect(function(){function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var siteVal;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(sortSiteVal===\"All\")){_context.next=5;break;}_context.next=3;return axios.get(\"/users/siteSortAlpha\").then(function(res){setWorkers(res.data);}).catch(function(err){console.log(err);});case 3:_context.next=8;break;case 5:siteVal={site:sortSiteVal};_context.next=8;return axios.post(\"/users/siteSort\",siteVal).then(function(res){setWorkers(res.data);}).catch(function(err){console.log(err);});case 8:_context.next=10;return axios.get(\"/sites\").then(function(res){return setSites(res.data);}).catch(function(err){return console.log(err);});case 10:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData();},[sortSiteVal]);return/*#__PURE__*/_jsxs(\"div\",{className:\"workers\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"workers__banner\",children:/*#__PURE__*/_jsx(Navbar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"workers__add\",children:/*#__PURE__*/_jsxs(Link,{className:\"add__link\",to:\"/create-worker\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"Media/add.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a Worker\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"workers__title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List of Workers\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{name:\"site\",value:sortSiteVal,onChange:function onChange(e){return setSortSiteVal(e.target.value);},className:\"workers__dropdown\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"All\"}),sites.map(function(site){return/*#__PURE__*/_jsx(\"option\",{children:site.siteName});})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"workers__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"workers__content\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"workers__table\",children:[/*#__PURE__*/_jsxs(\"thead\",{className:\"workers__content-header\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{marginRight:\"200px\"},children:\"Site\"}),/*#__PURE__*/_jsx(\"th\",{style:{marginRight:\"200px\"},children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowY:\"scroll\",height:\"400px\"},children:/*#__PURE__*/_jsx(\"tbody\",{className:\"workers__tbody\",children:workers.map(function(worker){return/*#__PURE__*/_jsxs(\"tr\",{className:\"workers__content-worker\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"td\",{children:worker.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"mr__content-data\",style:{marginRight:\"40px\"},children:/*#__PURE__*/_jsx(\"td\",{children:worker.site})}),/*#__PURE__*/_jsx(\"div\",{className:\"mr__content-data\",style:{marginRight:\"45px\"},children:/*#__PURE__*/_jsx(\"td\",{children:worker.phoneNo})}),/*#__PURE__*/_jsx(\"div\",{className:\"mr__content-data\",style:{marginRight:\"175px\"},children:/*#__PURE__*/_jsx(\"td\",{children:worker.type})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setTrigProfile(true);setWorker(worker);},className:\"workers__btn\",style:{left:\"930px\",marginLeft:\"-120px\"},children:\"View Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setTrigAtt(true);setWorker(worker);},className:\"workers__btn\",style:{left:\"1080px\",marginLeft:\"20px\"},children:\"Attendance\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setTrigAdv(true);setWorker(worker);},className:\"workers__btn\",style:{left:\"1230px\",marginLeft:\"20px\"},children:\"Pay Advance\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"workers__editIcon\",children:[/*#__PURE__*/_jsx(CreateIcon,{className:\"workers__createIcon\",onClick:function onClick(){setEdit(true);setWorker(worker);}}),\" \"]})]},worker._id);})})})]})}),trigProfile&&/*#__PURE__*/_jsx(ExpandMoreIcon,{style:{backgroundColor:\"#1c243a\",color:\"white\",borderRadius:\"50px\",marginLeft:\"50%\",marginTop:\"20px\",fontSize:\"40px\"}}),trigAtt&&/*#__PURE__*/_jsx(ExpandMoreIcon,{style:{backgroundColor:\"#1c243a\",color:\"white\",borderRadius:\"50px\",marginLeft:\"50%\",marginTop:\"20px\",fontSize:\"40px\"}}),trigAdv&&/*#__PURE__*/_jsx(ExpandMoreIcon,{style:{backgroundColor:\"#1c243a\",color:\"white\",borderRadius:\"50px\",marginLeft:\"50%\",marginTop:\"20px\",fontSize:\"40px\"}}),edit&&/*#__PURE__*/_jsx(ExpandMoreIcon,{style:{backgroundColor:\"#1c243a\",color:\"white\",borderRadius:\"50px\",marginLeft:\"50%\",marginTop:\"20px\",fontSize:\"40px\"}})]})}),trigProfile&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",height:\"100%\",width:\"100%\",left:\"0\",backgroundColor:\"#9ae3e6\"},children:/*#__PURE__*/_jsx(Profile,{setTrig:setTrigProfile,worker:worker})}),trigAtt&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",height:\"100%\",width:\"100%\",left:\"0\",backgroundColor:\"#9ae3e6\"},children:/*#__PURE__*/_jsx(Attendance,{setTrig:setTrigAtt,worker:worker})}),trigAdv&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",height:\"100%\",width:\"100%\",left:\"0\",backgroundColor:\"#9ae3e6\"},children:/*#__PURE__*/_jsx(Advance,{setTrig:setTrigAdv,worker:worker})}),edit&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",height:\"100%\",width:\"100%\",left:\"0\",backgroundColor:\"#9ae3e6\"},children:/*#__PURE__*/_jsx(EditProfile,{setTrig:setEdit,worker:worker,setEditOpt:setEditOpt,setEditDetails:setEditDetails})}),editOpt&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",height:\"100%\",width:\"100%\",left:\"0\",backgroundColor:\"#9ae3e6\"},children:/*#__PURE__*/_jsx(EditDetails,{setTrig:setEditOpt,worker:worker,editDetails:editDetails})})]});}export default Workers;","map":{"version":3,"sources":["C:/Users/aditi/rocks-and-logs/client/src/Workers/Workers.js"],"names":["React","useEffect","useState","Navbar","Link","axios","Profile","Attendance","ExpandMoreIcon","Advance","CreateIcon","EditProfile","EditDetails","Workers","workers","setWorkers","trigProfile","setTrigProfile","trigAtt","setTrigAtt","trigAdv","setTrigAdv","edit","setEdit","editDetails","setEditDetails","editOpt","setEditOpt","worker","setWorker","sites","setSites","sortSiteVal","setSortSiteVal","getData","get","then","res","data","catch","err","console","log","siteVal","site","post","e","target","value","map","siteName","marginRight","overflowY","height","name","phoneNo","type","left","marginLeft","_id","backgroundColor","color","borderRadius","marginTop","fontSize","position","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Navbar from '../Components/Navbar';\r\nimport './Workers.css';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Profile from '../Popups/Profile';\r\nimport Attendance from '../Popups/Attendance';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Advance from '../Popups/Advance';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport EditProfile from '../Popups/EditProfile';\r\nimport EditDetails from '../Popups/EditDetails';\r\n//import api from '../utils/api'\r\n\r\nfunction Workers() {\r\n\r\n    const [workers, setWorkers] = useState([])\r\n    \r\n    const [trigProfile, setTrigProfile] = useState(false);\r\n    const [trigAtt, setTrigAtt] = useState(false);\r\n    const [trigAdv, setTrigAdv] = useState(false);\r\n    const [edit, setEdit] = useState(false);\r\n    const [editDetails, setEditDetails] = useState('pdetails');\r\n    const [editOpt, setEditOpt] = useState(false);\r\n    const [worker, setWorker] = useState();\r\n\r\n    const [sites, setSites] = useState([]);\r\n    const [sortSiteVal, setSortSiteVal] = useState('All');\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n\r\n        async function getData(){\r\n\r\n            if(sortSiteVal === \"All\"){\r\n                await axios.get(\"/users/siteSortAlpha\")\r\n                    .then(res => {setWorkers(res.data)})\r\n                    .catch(err => {console.log(err)})\r\n            } else {\r\n                \r\n                const siteVal = {\r\n                    site: sortSiteVal\r\n                }\r\n                await axios.post(\"/users/siteSort\", siteVal)\r\n                    .then(res => {setWorkers(res.data)})\r\n                    .catch(err => {console.log(err)})\r\n            }\r\n            \r\n            \r\n            await axios.get(\"/sites\")\r\n                .then(res => setSites(res.data))\r\n                .catch(err => console.log(err))\r\n        }\r\n        \r\n        getData();\r\n        \r\n            \r\n    }, [sortSiteVal])\r\n\r\n\r\n \r\n\r\n\r\n \r\n    return (\r\n        <div className=\"workers\">\r\n            <div className=\"workers__banner\">\r\n                <Navbar />\r\n            </div>\r\n\r\n            <div className=\"workers__add\">\r\n                <Link className=\"add__link\" to='/create-worker'>\r\n                    <img src=\"Media/add.png\" alt=\"\" />\r\n                    <h2>Add a Worker</h2>\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"workers__title\">\r\n                <h2>List of Workers</h2>\r\n                <div >\r\n                        <select name=\"site\" value={sortSiteVal} onChange={(e) => setSortSiteVal(e.target.value)} className=\"workers__dropdown\">\r\n                            <option >All</option>\r\n                                {sites.map(site => (\r\n                                    <option >{site.siteName}</option>\r\n                                ))}\r\n                        </select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"workers__container\" >\r\n                <div className=\"workers__content\" >                               \r\n\r\n                    <div >\r\n                        <table className=\"workers__table\">\r\n                            <thead className=\"workers__content-header\">\r\n                            \r\n                                <th>Name</th>\r\n                                <th style={{marginRight: \"200px\"}}>Site</th>\r\n                                <th style={{marginRight: \"200px\"}}>Phone</th>\r\n                                <th>Type</th>\r\n                            \r\n                            </thead>\r\n                            <div style={{overflowY: \"scroll\", height: \"400px\"}}>\r\n                                <tbody className=\"workers__tbody\">\r\n                                    {workers.map(worker => (\r\n                                        <tr key={worker._id} className=\"workers__content-worker\">\r\n                                            <div><td >{worker.name}</td></div>\r\n                                            <div className=\"mr__content-data\" style={{marginRight: \"40px\"}}><td >{worker.site}</td></div>\r\n                                            <div className=\"mr__content-data\" style={{marginRight: \"45px\"}}><td >{worker.phoneNo}</td></div>\r\n                                            <div className=\"mr__content-data\" style={{marginRight: \"175px\"}}><td >{worker.type}</td></div>                                     \r\n                                            \r\n                                            <button onClick={() => {setTrigProfile(true); setWorker(worker)}} className=\"workers__btn\"  style={{left: \"930px\", marginLeft: \"-120px\"}} >View Profile</button>\r\n                                            <button onClick={() => {setTrigAtt(true); setWorker(worker)}} className=\"workers__btn\" style={{left: \"1080px\", marginLeft: \"20px\"}}>Attendance</button>\r\n                                            <button onClick={() => {setTrigAdv(true); setWorker(worker)}} className=\"workers__btn\" style={{left: \"1230px\", marginLeft: \"20px\"}}>Pay Advance</button>\r\n                                            <button className=\"workers__editIcon\"><CreateIcon className=\"workers__createIcon\" onClick={() => {setEdit(true); setWorker(worker)}}></CreateIcon> </button>\r\n\r\n                                        </tr>\r\n                                    ))}\r\n                                \r\n                                </tbody>\r\n                            </div>\r\n                        </table>\r\n                    </div>\r\n\r\n                    \r\n                   {trigProfile && <ExpandMoreIcon style={{backgroundColor: \"#1c243a\", color: \"white\", borderRadius: \"50px\", marginLeft: \"50%\", marginTop: \"20px\", fontSize: \"40px\"}} />}\r\n\r\n                   {trigAtt && <ExpandMoreIcon style={{backgroundColor: \"#1c243a\", color: \"white\", borderRadius: \"50px\", marginLeft: \"50%\", marginTop: \"20px\", fontSize: \"40px\"}} />}\r\n\r\n                   {trigAdv && <ExpandMoreIcon style={{backgroundColor: \"#1c243a\", color: \"white\", borderRadius: \"50px\", marginLeft: \"50%\", marginTop: \"20px\", fontSize: \"40px\"}} />}\r\n\r\n                   {edit && <ExpandMoreIcon style={{backgroundColor: \"#1c243a\", color: \"white\", borderRadius: \"50px\", marginLeft: \"50%\", marginTop: \"20px\", fontSize: \"40px\"}} />}\r\n                   \r\n                   \r\n                    \r\n                </div>\r\n            </div>\r\n\r\n            {trigProfile && <div style={{position: \"absolute\", height: \"100%\", width: \"100%\", left: \"0\", backgroundColor: \"#9ae3e6\"}} >\r\n                <Profile setTrig={setTrigProfile} worker={worker} />\r\n            </div>}\r\n\r\n\r\n            {trigAtt && <div style={{position: \"absolute\", height: \"100%\", width: \"100%\", left: \"0\", backgroundColor: \"#9ae3e6\"}} >\r\n                <Attendance setTrig={setTrigAtt} worker={worker} />\r\n            </div>}\r\n\r\n            {trigAdv && <div style={{position: \"absolute\", height: \"100%\", width: \"100%\", left: \"0\", backgroundColor: \"#9ae3e6\"}} >\r\n                <Advance setTrig={setTrigAdv} worker={worker} />\r\n            </div>}\r\n\r\n            {edit && <div style={{position: \"absolute\", height: \"100%\", width: \"100%\", left: \"0\", backgroundColor: \"#9ae3e6\"}} >\r\n                <EditProfile setTrig={setEdit} worker={worker} setEditOpt={setEditOpt} setEditDetails={setEditDetails} />\r\n            </div>}\r\n\r\n            {editOpt && <div style={{position: \"absolute\", height: \"100%\", width: \"100%\", left: \"0\", backgroundColor: \"#9ae3e6\"}} >\r\n                <EditDetails setTrig={setEditOpt} worker={worker} editDetails={editDetails} />\r\n            </div>}\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Workers\r\n"]},"metadata":{},"sourceType":"module"}