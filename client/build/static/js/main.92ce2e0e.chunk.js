(this["webpackJsonprocks-and-logs"]=this["webpackJsonprocks-and-logs"]||[]).push([[0],{100:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(23),r=c.n(a),i=(c(70),c(15)),l=c(8),o=(c(71),c(72),c(25)),j=c(4),d=c.n(j),b=c(7),h=c(5),u=c.n(h),x="ADMIN_LOADED",p="AUTH_ERROR",O="LOGIN_SUCCESS",m="LOGIN_FAIL",f="LOGOUT",g=function(e){e?(u.a.defaults.headers.common["x-auth-token"]=e,localStorage.setItem("token",e)):(delete u.a.defaults.headers.common["x-auth-token"],localStorage.removeItem("token"))},v=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&g(localStorage.token),e.prev=1,e.next=4,u.a.get("/auth/");case 4:c=e.sent,t({type:x,payload:c.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:p});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},_=c(0),y=Object(o.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:f})}}})((function(e){var t=e.auth,c=t.isAuthenticated,n=t.loading,s=e.logout,a=Object(l.g)();return Object(_.jsxs)("div",{className:"navbar",children:[Object(_.jsx)("div",{className:"navbar__title",children:Object(_.jsx)(i.b,{to:"/",className:"nav__title",children:"Rocks & Logs"})}),Object(_.jsxs)("div",{className:"navbar__right",children:[Object(_.jsxs)("div",{className:"nav__eles",children:[Object(_.jsx)(i.b,{to:"/add-site",className:"nav__ele",children:Object(_.jsx)("h2",{children:"Add/Del Site"})}),Object(_.jsx)(i.b,{to:"/workers",className:"nav__ele",children:Object(_.jsx)("h2",{children:"Workers"})}),Object(_.jsx)(i.b,{to:"/monthly-report",className:"nav__ele",children:Object(_.jsx)("h2",{children:"Monthly Report"})})]}),Object(_.jsx)("button",{onClick:function(e){e.preventDefault(),s(),n||c||a.push("/login")},className:"nav__link",children:"Logout"})]})]})}));var N=function(){return Object(_.jsxs)("div",{className:"banner",children:[Object(_.jsx)(y,{}),Object(_.jsxs)("div",{className:"banner__content",children:[Object(_.jsx)("h2",{children:"Workers Log"}),Object(_.jsx)("img",{src:"Media/workers.png",alt:"",className:"banner__img"})]})]})};var w=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(N,{})})},k=c(3),R=(c(98),c(122));var S=function(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(k.a)(a,2),i=r[0],o=r[1],j=Object(n.useState)(!1),h=Object(k.a)(j,2),x=h[0],p=h[1];Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/sites").then((function(e){return s(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var O=Object(n.useRef)(),m=Object(n.useRef)(),f=Object(n.useRef)(),g=Object(n.useRef)(),v=Object(n.useRef)(),N=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),A=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),D=Object(n.useRef)(),I=Object(n.useRef)(),L=Object(n.useRef)(),M=Object(n.useState)(""),E=Object(k.a)(M,2),J=E[0],P=E[1],B=Object(n.useState)(""),W=Object(k.a)(B,2),F=W[0],z=W[1],H=Object(l.g)();function U(){return(U=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={name:O.current.value,aadharNo:m.current.value,phoneNo:f.current.value,address:g.current.value,doj:v.current.value,site:J,type:F,uanNo:N.current.value,pfNo:w.current.value,esic:S.current.value,wagesRate:A.current.value,otRate:C.current.value,daRate:T.current.value,bank:D.current.value,accountNo:I.current.value,ifsc:L.current.value},e.prev=2,p(!1),e.next=6,u.a.post("/users/add",c);case 6:H.push("/workers"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),o(e.t0),p(!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return Object(_.jsxs)("div",{className:"cw",children:[Object(_.jsx)("div",{className:"cw__nav",children:Object(_.jsx)(y,{})}),Object(_.jsxs)("div",{className:"cw__container",style:{marginTop:"30px"},children:[Object(_.jsxs)("div",{className:"cw__lcontent",children:[Object(_.jsx)("h2",{children:"Enter worker's personal details"}),Object(_.jsx)("h3",{children:"Name"}),Object(_.jsx)("input",{type:"text",ref:O,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Aadhar No."}),Object(_.jsx)("input",{type:"text",ref:m,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Phone No."}),Object(_.jsx)("input",{type:"text",ref:f,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Address"}),Object(_.jsx)("input",{type:"text",ref:g,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Date Of Joining"}),Object(_.jsx)("input",{type:"date",ref:v,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Site"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{style:{overflowY:"scroll"},value:J,onChange:function(e){P(e.target.value)},name:"site",className:"cw__dropdown",children:[Object(_.jsx)("option",{children:"-select-"}),c.map((function(e){return Object(_.jsx)("option",{children:e.siteName})}))]})}),Object(_.jsx)("h3",{children:"Type of worker"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{value:F,onChange:function(e){z(e.target.value)},name:"type",className:"cw__dropdown",children:[Object(_.jsx)("option",{children:"-select-"}),Object(_.jsx)("option",{children:"Helper"}),Object(_.jsx)("option",{children:"Semi-mason"}),Object(_.jsx)("option",{children:"Mason"})]})})]}),Object(_.jsx)("div",{className:"cw__div"}),Object(_.jsxs)("div",{className:"cw__rcontent",children:[Object(_.jsx)("h2",{children:"Enter worker's bank details"}),Object(_.jsx)("h3",{children:"UAN No."}),Object(_.jsx)("input",{type:"text",ref:N,className:"cw__inp"}),Object(_.jsx)("h3",{children:"PF No."}),Object(_.jsx)("input",{type:"text",ref:w,className:"cw__inp"}),Object(_.jsx)("h3",{children:"ESIC "}),Object(_.jsx)("input",{type:"text",ref:S,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Wages Rate"}),Object(_.jsx)("input",{type:"number",ref:A,className:"cw__inp"}),Object(_.jsx)("h3",{children:"OT Rate"}),Object(_.jsx)("input",{type:"number",ref:C,className:"cw__inp"}),Object(_.jsx)("h3",{children:"DA/SA Rate"}),Object(_.jsx)("input",{type:"number",ref:T,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Bank Name"}),Object(_.jsx)("input",{type:"text",ref:D,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Account No."}),Object(_.jsx)("input",{type:"text",ref:I,className:"cw__inp"}),Object(_.jsx)("h3",{children:"IFSC Code"}),Object(_.jsx)("input",{type:"text",ref:L,className:"cw__inp"}),Object(_.jsx)("button",{onClick:function(e){return U.apply(this,arguments)},className:"cw__btn",children:"Add Worker"}),x&&Object(_.jsx)(R.a,{severity:"error",children:i})]})]})]})},A=(c(99),c(100),c(19)),C=c.n(A);var T=function(e){var t=e.setTrig,c=e.worker;return Object(_.jsxs)("div",{className:"cw",children:[Object(_.jsx)(C.a,{className:"profile__back",onClick:function(){return t(!1)},style:{fontSize:"35px"}}),Object(_.jsxs)("div",{className:"cw__container",children:[Object(_.jsxs)("div",{className:"profile__lcontent",children:[Object(_.jsx)("h2",{children:"Worker's personal details"}),Object(_.jsx)("h3",{children:"Name"}),Object(_.jsx)("p",{children:c.name}),Object(_.jsx)("h3",{children:"Aadhar No."}),Object(_.jsx)("p",{children:c.aadharNo}),Object(_.jsx)("h3",{children:"Phone No."}),Object(_.jsx)("p",{children:c.phoneNo}),Object(_.jsx)("h3",{children:"Address"}),Object(_.jsx)("p",{children:c.address}),Object(_.jsx)("h3",{children:"Date Of Joining"}),Object(_.jsx)("p",{children:c.doj.substring(0,10)}),Object(_.jsx)("h3",{children:"Site"}),Object(_.jsx)("p",{children:c.site}),Object(_.jsx)("h3",{children:"Type of worker"}),Object(_.jsx)("p",{children:c.type})]}),Object(_.jsx)("div",{className:"cw__div"}),Object(_.jsxs)("div",{className:"profile__rcontent",children:[Object(_.jsx)("h2",{children:"Worker's bank details"}),Object(_.jsx)("h3",{children:"UAN No."}),Object(_.jsx)("p",{children:c.uanNo}),Object(_.jsx)("h3",{children:"PF No."}),Object(_.jsx)("p",{children:c.pfNo}),Object(_.jsx)("h3",{children:"ESIC "}),Object(_.jsx)("p",{children:c.esic}),Object(_.jsx)("h3",{children:"Wages Rate"}),Object(_.jsx)("p",{children:c.wagesRate}),Object(_.jsx)("h3",{children:"OT Rate"}),Object(_.jsx)("p",{children:c.otRate}),Object(_.jsx)("h3",{children:"DA/SA Rate"}),Object(_.jsx)("p",{children:c.daRate}),Object(_.jsx)("h3",{children:"Bank Name"}),Object(_.jsx)("p",{children:c.bank}),Object(_.jsx)("h3",{children:"Account No."}),Object(_.jsx)("p",{children:c.accountNo}),Object(_.jsx)("h3",{children:"IFSC Code"}),Object(_.jsx)("p",{children:c.ifsc})]})]})]})};c(102);var D=function(e){var t=e.setTrig,c=e.worker,s=Object(n.useState)(!1),a=Object(k.a)(s,2),r=a[0],i=a[1],l=Object(n.useState)(""),o=Object(k.a)(l,2),j=o[0],h=o[1],x=Object(n.useState)(!1),p=Object(k.a)(x,2),O=p[0],m=p[1],f=Object(n.useState)("Jan"),g=Object(k.a)(f,2),v=g[0],y=g[1],N=Object(n.useRef)(),w=Object(n.useRef)();function S(){return(S=Object(b.a)(d.a.mark((function e(){var t,n,s,a,r,l,o,j,b,x,p,O,f,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=N.current.value*c.wagesRate,n=N.current.value*c.daRate,s=w.current.value*c.otRate,r=t+n+s+(a=.05*(t+n)),l=0,l=t+n>15e3?1800:Math.round(.12*(t+n)*1e4)/1e4,o=Math.round(.0075*r*1e4)/1e4,j=0,j=r<=7500?0:7500<r&&r<=1e4?1750:200,b=0,x=0,e.t0=v,e.next="Jan"===e.t0?15:"Feb"===e.t0?18:"Mar"===e.t0?21:"Apr"===e.t0?24:"May"===e.t0?27:"Jun"===e.t0?30:"Jul"===e.t0?33:"Aug"===e.t0?36:"Sep"===e.t0?39:"Oct"===e.t0?42:"Nov"===e.t0?45:"Dec"===e.t0?48:51;break;case 15:return b=c.monthlyReport.Jan.adv,x=c.monthlyReport.Jan.lwf,e.abrupt("break",52);case 18:return b=c.monthlyReport.Feb.adv,x=c.monthlyReport.Feb.lwf,e.abrupt("break",52);case 21:return b=c.monthlyReport.Mar.adv,x=c.monthlyReport.Mar.lwf,e.abrupt("break",52);case 24:return b=c.monthlyReport.Apr.adv,x=c.monthlyReport.Apr.lwf,e.abrupt("break",52);case 27:return b=c.monthlyReport.May.adv,x=c.monthlyReport.May.lwf,e.abrupt("break",52);case 30:return b=c.monthlyReport.Jun.adv,x=c.monthlyReport.Jun.lwf,e.abrupt("break",52);case 33:return b=c.monthlyReport.Jul.adv,x=c.monthlyReport.Jul.lwf,e.abrupt("break",52);case 36:return b=c.monthlyReport.Aug.adv,x=c.monthlyReport.Aug.lwf,e.abrupt("break",52);case 39:return b=c.monthlyReport.Sep.adv,x=c.monthlyReport.Sep.lwf,e.abrupt("break",52);case 42:return b=c.monthlyReport.Oct.adv,x=c.monthlyReport.Oct.lwf,e.abrupt("break",52);case 45:return b=c.monthlyReport.Nov.adv,x=c.monthlyReport.Nov.lwf,e.abrupt("break",52);case 48:return b=c.monthlyReport.Dec.adv,x=c.monthlyReport.Dec.lwf,e.abrupt("break",52);case 51:return e.abrupt("break",52);case 52:return p=l+o+j+b+x,O=Number((r-p).toFixed()),f={presentDays:N.current.value,otHrs:w.current.value,basicWages:t,daWages:n,otAmt:s,hra:a,totalWages:r,pf:l,esic:o,pt:j,totDeduction:p,fPay:O,site:c.site},console.log(f),g=c._id,e.next=59,u.a.post("/users/update".concat(v,"Report/").concat(g),f).then(m(!1),i(!0)).catch((function(e){h(e),m(!0)}));case 59:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(_.jsxs)("div",{className:"cw",children:[Object(_.jsx)(C.a,{className:"profile__back",onClick:function(){return t(!1)},style:{fontSize:"35px"}}),Object(_.jsx)("div",{className:"cw__container",style:{display:"flex",justifyContent:"center",width:"40vw",alignItems:"center"},children:Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsx)("h2",{children:c.name}),Object(_.jsx)("h3",{children:"Month"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{value:v,onChange:function(e){y(e.target.value)},name:"site",className:"cw__dropdown",style:{marginBottom:"20px"},children:[Object(_.jsx)("option",{children:"Jan"}),Object(_.jsx)("option",{children:"Feb"}),Object(_.jsx)("option",{children:"Mar"}),Object(_.jsx)("option",{children:"Apr"}),Object(_.jsx)("option",{children:"May"}),Object(_.jsx)("option",{children:"Jun"}),Object(_.jsx)("option",{children:"Jul"}),Object(_.jsx)("option",{children:"Aug"}),Object(_.jsx)("option",{children:"Sep"}),Object(_.jsx)("option",{children:"Oct"}),Object(_.jsx)("option",{children:"Nov"}),Object(_.jsx)("option",{children:"Dec"})]})}),Object(_.jsx)("h3",{children:"Present days"}),Object(_.jsx)("input",{type:"number",className:"cw__inp",ref:N,style:{marginBottom:"20px",height:"40px"}}),Object(_.jsx)("h3",{children:"OT Hours"}),Object(_.jsx)("input",{type:"number",className:"cw__inp",ref:w,style:{marginBottom:"40px",height:"40px"}}),Object(_.jsx)("button",{onClick:function(){return S.apply(this,arguments)},className:"cw__btn",children:"Save"}),r&&Object(_.jsx)(R.a,{severity:"success",children:"Information updated"}),O&&Object(_.jsx)(R.a,{severity:"error",children:j})]})})]})},I=c(40),L=c.n(I);var M=function(e){var t=e.setTrig,c=e.worker,s=Object(n.useState)(""),a=Object(k.a)(s,2),r=a[0],i=a[1],l=Object(n.useState)(!1),o=Object(k.a)(l,2),j=o[0],h=o[1],x=Object(n.useState)(!1),p=Object(k.a)(x,2),O=p[0],m=p[1],f=Object(n.useState)("Jan"),g=Object(k.a)(f,2),v=g[0],y=g[1],N=Object(n.useRef)();function w(){return(w=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={adv:N.current.value},n=c._id,e.next=4,u.a.post("/users/update".concat(v,"Adv/").concat(n),t).then(h(!1),m(!0)).catch((function(e){i(e),h(!0)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(_.jsxs)("div",{className:"cw",children:[Object(_.jsx)(C.a,{className:"profile__back",onClick:function(){return t(!1)},style:{fontSize:"35px"}}),Object(_.jsx)("div",{className:"cw__container",style:{display:"flex",justifyContent:"center",width:"40vw",alignItems:"center"},children:Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsx)("h2",{children:c.name}),Object(_.jsx)("h3",{children:"Month"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{value:v,onChange:function(e){y(e.target.value)},name:"month",className:"cw__dropdown",style:{marginBottom:"20px"},children:[Object(_.jsx)("option",{children:"Jan"}),Object(_.jsx)("option",{children:"Feb"}),Object(_.jsx)("option",{children:"Mar"}),Object(_.jsx)("option",{children:"Apr"}),Object(_.jsx)("option",{children:"May"}),Object(_.jsx)("option",{children:"Jun"}),Object(_.jsx)("option",{children:"Jul"}),Object(_.jsx)("option",{children:"Aug"}),Object(_.jsx)("option",{children:"Sep"}),Object(_.jsx)("option",{children:"Oct"}),Object(_.jsx)("option",{children:"Nov"}),Object(_.jsx)("option",{children:"Dec"})]})}),Object(_.jsx)("h3",{children:"Advance Amount"}),Object(_.jsx)("input",{type:"number",className:"cw__inp",ref:N,style:{marginBottom:"40px",height:"40px"}}),Object(_.jsx)("button",{onClick:function(){return w.apply(this,arguments)},className:"cw__btn",style:{marginBottom:"10px"},children:"Add Advance"}),O&&Object(_.jsx)(R.a,{severity:"success",children:"Advance Amount Added"}),j&&Object(_.jsx)(R.a,{severity:"error",children:r})]})})]})},E=c(57),J=c.n(E);var P=function(e){var t=e.setTrig,c=e.worker,n=e.setEditOpt,s=e.setEditDetails;return Object(_.jsxs)("div",{className:"cw",children:[Object(_.jsx)(C.a,{className:"profile__back",onClick:function(){return t(!1)},style:{fontSize:"35px"}}),Object(_.jsx)("div",{className:"cw__container",style:{display:"flex",justifyContent:"center",width:"40vw",alignItems:"center"},children:Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsx)("h2",{children:c.name}),Object(_.jsx)("button",{onClick:function(){t(!1),n(!0),s("pdetails")},className:"cw__btn",style:{marginBottom:"10px",height:"70px"},children:"Edit worker's details"}),Object(_.jsx)("button",{onClick:function(){t(!1),n(!0),s("bdetails")},className:"cw__btn",style:{marginBottom:"10px",height:"70px"},children:"Edit worker's paymnet details"})]})})]})};var B=function(e){var t=e.setTrig,c=e.worker,s=e.editDetails,a=Object(n.useState)([]),r=Object(k.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(!1),j=Object(k.a)(o,2),h=j[0],x=j[1],p=Object(n.useState)(""),O=Object(k.a)(p,2),m=O[0],f=O[1],g=Object(n.useState)(!1),v=Object(k.a)(g,2),y=v[0],N=v[1];Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/sites").then((function(e){return l(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var w=Object(n.useRef)(),S=Object(n.useRef)(),A=Object(n.useState)(""),T=Object(k.a)(A,2),D=T[0],I=T[1],L=Object(n.useState)(""),M=Object(k.a)(L,2),E=M[0],J=M[1];function P(){return(P=Object(b.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c._id,t.preventDefault(),s={phoneNo:w.current.value,address:S.current.value,site:D,type:E},e.next=5,u.a.post("/users/updatePdetails/".concat(n),s).then(N(!1),x(!0)).catch((function(e){f(e),N(!0)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=Object(n.useRef)(),W=Object(n.useRef)(),F=Object(n.useRef)(),z=Object(n.useRef)(),H=Object(n.useRef)(),U=Object(n.useRef)(),Y=Object(n.useRef)(),G=Object(n.useRef)(),q=Object(n.useRef)();function V(){return(V=Object(b.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c._id,t.preventDefault(),s={uanNo:B.current.value,pfNo:W.current.value,esic:F.current.value,wagesRate:z.current.value,otRate:H.current.value,daRate:U.current.value,bank:Y.current.value,accountNo:G.current.value,ifsc:q.current.value},e.next=5,u.a.post("/users/updateBdetails/".concat(n),s).then(N(!1),x(!0)).catch((function(e){f(e),N(!0)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(_.jsx)("div",{className:"cw",children:"pdetails"===s?Object(_.jsxs)("div",{children:[Object(_.jsx)(C.a,{className:"profile__back",onClick:function(){return t(!1)},style:{fontSize:"35px"}}),Object(_.jsx)("div",{className:"cw__container",style:{display:"flex",justifyContent:"center",width:"38vw",alignItems:"center",height:"85vh",marginTop:"-50px",marginLeft:"50px"},children:Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsx)("h2",{children:c.name}),Object(_.jsx)("h3",{children:"Phone No."}),Object(_.jsx)("input",{type:"text",ref:w,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Address"}),Object(_.jsx)("input",{type:"text",ref:S,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Site"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{style:{overflowY:"scroll"},value:D,onChange:function(e){I(e.target.value)},name:"site",className:"cw__dropdown",children:[Object(_.jsx)("option",{children:"-select-"}),i.map((function(e){return Object(_.jsx)("option",{children:e.siteName})}))]})}),Object(_.jsx)("h3",{children:"Type of worker"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{value:E,onChange:function(e){J(e.target.value)},name:"type",className:"cw__dropdown",children:[Object(_.jsx)("option",{children:"-select-"}),Object(_.jsx)("option",{children:"Helper"}),Object(_.jsx)("option",{children:"Semi-mason"}),Object(_.jsx)("option",{children:"Mason"})]})}),Object(_.jsx)("button",{onClick:function(e){return P.apply(this,arguments)},className:"cw__btn",style:{marginBottom:"10px"},children:"Save"}),h&&Object(_.jsx)(R.a,{severity:"success",children:"Details updated"}),y&&Object(_.jsx)(R.a,{severity:"error",children:m})]})})]}):Object(_.jsxs)("div",{children:[Object(_.jsx)(C.a,{className:"profile__back",onClick:function(){return t(!1)},style:{fontSize:"35px"}}),Object(_.jsx)("div",{className:"cw__container",style:{display:"flex",justifyContent:"center",width:"38vw",alignItems:"center",height:"85vh",marginTop:"-50px",marginLeft:"50px"},children:Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsx)("h2",{children:c.name}),Object(_.jsxs)("div",{style:{overflowY:"scroll",maxHeight:"280px",marginBottom:"20px",marginTop:"-20px"},children:[Object(_.jsx)("h3",{children:"Wages Rate"}),Object(_.jsx)("input",{type:"number",ref:z,className:"cw__inp"}),Object(_.jsx)("h3",{children:"OT Rate"}),Object(_.jsx)("input",{type:"number",ref:H,className:"cw__inp"}),Object(_.jsx)("h3",{children:"DA/SA Rate"}),Object(_.jsx)("input",{type:"number",ref:U,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Bank Name"}),Object(_.jsx)("input",{type:"text",ref:Y,className:"cw__inp"}),Object(_.jsx)("h3",{children:"Account No."}),Object(_.jsx)("input",{type:"text",ref:G,className:"cw__inp"}),Object(_.jsx)("h3",{children:"IFSC Code"}),Object(_.jsx)("input",{type:"text",ref:q,className:"cw__inp"})]}),Object(_.jsx)("button",{onClick:function(e){return V.apply(this,arguments)},className:"cw__btn",style:{marginBottom:"10px"},children:"Save"}),h&&Object(_.jsx)(R.a,{severity:"success",children:"Details updated"}),y&&Object(_.jsx)(R.a,{severity:"error",children:m})]})})]})})};var W=function(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(k.a)(a,2),l=r[0],o=r[1],j=Object(n.useState)(!1),h=Object(k.a)(j,2),x=h[0],p=h[1],O=Object(n.useState)(!1),m=Object(k.a)(O,2),f=m[0],g=m[1],v=Object(n.useState)(!1),N=Object(k.a)(v,2),w=N[0],R=N[1],S=Object(n.useState)("pdetails"),A=Object(k.a)(S,2),C=A[0],I=A[1],E=Object(n.useState)(!1),W=Object(k.a)(E,2),F=W[0],z=W[1],H=Object(n.useState)(),U=Object(k.a)(H,2),Y=U[0],G=U[1],q=Object(n.useState)([]),V=Object(k.a)(q,2),X=V[0],K=V[1],Q=Object(n.useState)("All"),Z=Object(k.a)(Q,2),$=Z[0],ee=Z[1];return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("All"!==$){e.next=5;break}return e.next=3,u.a.get("/users/siteSortAlpha").then((function(e){s(e.data)})).catch((function(e){console.log(e)}));case 3:e.next=8;break;case 5:return t={site:$},e.next=8,u.a.post("/users/siteSort",t).then((function(e){s(e.data)})).catch((function(e){console.log(e)}));case 8:return e.next=10,u.a.get("/sites").then((function(e){return K(e.data)})).catch((function(e){return console.log(e)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[$]),Object(_.jsxs)("div",{className:"workers",children:[Object(_.jsx)("div",{className:"workers__banner",children:Object(_.jsx)(y,{})}),Object(_.jsx)("div",{className:"workers__add",children:Object(_.jsxs)(i.b,{className:"add__link",to:"/create-worker",children:[Object(_.jsx)("img",{src:"Media/add.png",alt:""}),Object(_.jsx)("h2",{children:"Add a Worker"})]})}),Object(_.jsxs)("div",{className:"workers__title",children:[Object(_.jsx)("h2",{children:"List of Workers"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{name:"site",value:$,onChange:function(e){return ee(e.target.value)},className:"workers__dropdown",children:[Object(_.jsx)("option",{children:"All"}),X.map((function(e){return Object(_.jsx)("option",{children:e.siteName})}))]})})]}),Object(_.jsx)("div",{className:"workers__container",children:Object(_.jsxs)("div",{className:"workers__content",children:[Object(_.jsx)("div",{children:Object(_.jsxs)("table",{className:"workers__table",children:[Object(_.jsxs)("thead",{className:"workers__content-header",children:[Object(_.jsx)("th",{children:"Name"}),Object(_.jsx)("th",{style:{marginRight:"200px"},children:"Site"}),Object(_.jsx)("th",{style:{marginRight:"200px"},children:"Phone"}),Object(_.jsx)("th",{children:"Type"})]}),Object(_.jsx)("div",{style:{overflowY:"scroll",height:"400px"},children:Object(_.jsx)("tbody",{className:"workers__tbody",children:c.map((function(e){return Object(_.jsxs)("tr",{className:"workers__content-worker",children:[Object(_.jsx)("div",{children:Object(_.jsx)("td",{children:e.name})}),Object(_.jsx)("div",{className:"mr__content-data",style:{marginRight:"40px"},children:Object(_.jsx)("td",{children:e.site})}),Object(_.jsx)("div",{className:"mr__content-data",style:{marginRight:"45px"},children:Object(_.jsx)("td",{children:e.phoneNo})}),Object(_.jsx)("div",{className:"mr__content-data",style:{marginRight:"175px"},children:Object(_.jsx)("td",{children:e.type})}),Object(_.jsx)("button",{onClick:function(){o(!0),G(e)},className:"workers__btn",style:{left:"930px",marginLeft:"-120px"},children:"View Profile"}),Object(_.jsx)("button",{onClick:function(){p(!0),G(e)},className:"workers__btn",style:{left:"1080px",marginLeft:"20px"},children:"Attendance"}),Object(_.jsx)("button",{onClick:function(){g(!0),G(e)},className:"workers__btn",style:{left:"1230px",marginLeft:"20px"},children:"Pay Advance"}),Object(_.jsxs)("button",{className:"workers__editIcon",children:[Object(_.jsx)(J.a,{className:"workers__createIcon",onClick:function(){R(!0),G(e)}})," "]})]},e._id)}))})})]})}),l&&Object(_.jsx)(L.a,{style:{backgroundColor:"#1c243a",color:"white",borderRadius:"50px",marginLeft:"50%",marginTop:"20px",fontSize:"40px"}}),x&&Object(_.jsx)(L.a,{style:{backgroundColor:"#1c243a",color:"white",borderRadius:"50px",marginLeft:"50%",marginTop:"20px",fontSize:"40px"}}),f&&Object(_.jsx)(L.a,{style:{backgroundColor:"#1c243a",color:"white",borderRadius:"50px",marginLeft:"50%",marginTop:"20px",fontSize:"40px"}}),w&&Object(_.jsx)(L.a,{style:{backgroundColor:"#1c243a",color:"white",borderRadius:"50px",marginLeft:"50%",marginTop:"20px",fontSize:"40px"}})]})}),l&&Object(_.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",left:"0",backgroundColor:"#9ae3e6"},children:Object(_.jsx)(T,{setTrig:o,worker:Y})}),x&&Object(_.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",left:"0",backgroundColor:"#9ae3e6"},children:Object(_.jsx)(D,{setTrig:p,worker:Y})}),f&&Object(_.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",left:"0",backgroundColor:"#9ae3e6"},children:Object(_.jsx)(M,{setTrig:g,worker:Y})}),w&&Object(_.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",left:"0",backgroundColor:"#9ae3e6"},children:Object(_.jsx)(P,{setTrig:R,worker:Y,setEditOpt:z,setEditDetails:I})}),F&&Object(_.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",left:"0",backgroundColor:"#9ae3e6"},children:Object(_.jsx)(B,{setTrig:z,worker:Y,editDetails:C})})]})},F=(c(103),c(58)),z=c.n(F);var H=function(){var e=Object(n.useState)([]),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(),r=Object(k.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)("Jan"),j=Object(k.a)(o,2),h=j[0],x=j[1],p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=new Date,m=p.indexOf(O.toString().substring(4,7)),f=Object(n.useState)(!1),g=Object(k.a)(f,2),v=g[0],N=g[1],w=Object(n.useState)(!1),R=Object(k.a)(w,2),S=R[0],A=R[1],C=Object(n.useState)(!1),T=Object(k.a)(C,2),D=T[0],I=T[1],L=Object(n.useState)(m),M=Object(k.a)(L,2),E=M[0],J=M[1],P=0,B=Object(n.useState)([]),W=Object(k.a)(B,2),F=W[0],H=W[1],U=Object(n.useState)("All"),Y=Object(k.a)(U,2),G=Y[0],q=Y[1],V="".concat(h).concat(G,"Report");return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/sites").then((function(e){return H(e.data)})).catch((function(e){return console.log(e)}));case 2:if("All"!==G){e.next=7;break}return e.next=5,u.a.get("/users/siteSortAlpha").then((function(e){s(e.data)})).catch((function(e){console.log(e)}));case 5:e.next=10;break;case 7:return t={site:G},e.next=10,u.a.post("/users/siteSort".concat(h),t).then((function(e){s(e.data)})).catch((function(e){console.log(e)}));case 10:return c=p[E],x(c),e.next=14,u.a.get("/users/".concat(h,"Report")).then((function(e){return l(e.data)})).catch((function(e){return console.log(e)}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}A(0===E),N(11===E),function(){e.apply(this,arguments)}()}),[E,h,G]),Object(_.jsxs)("div",{className:"workers",children:[Object(_.jsx)("div",{className:"workers__banner",style:{height:"350px"},children:Object(_.jsx)(y,{})}),Object(_.jsxs)("div",{className:"workers__title",children:[Object(_.jsxs)("div",{className:"mr__report-title",children:[Object(_.jsx)("button",{disabled:S,onClick:function(){J(E-1)},className:"mr__title-arrow",style:{fontSize:"15px",marginRight:"20px",marginTop:"10px",color:"#9ae3e6"},children:" Prev "}),Object(_.jsxs)("h2",{children:[h,"'s Report"]}),Object(_.jsx)("button",{disabled:v,onClick:function(){J(E+1)},className:"mr__title-arrow",style:{fontSize:"15px",marginLeft:"20px",marginTop:"10px",color:"#9ae3e6"},children:"Next"})]}),Object(_.jsx)("button",{className:"mr__reset-btn",onClick:function(){I(!0)},children:"RESET"}),Object(_.jsx)(z.a,{className:"mr__export-btn",table:"monthlyReport",filename:V,sheet:"sheet 1",buttonText:"EXPORT"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{name:"site",value:G,onChange:function(e){q(e.target.value),P=0},className:"workers__dropdown",children:[Object(_.jsx)("option",{children:"All"}),F.map((function(e){return Object(_.jsx)("option",{children:e.siteName})}))]})})]}),D&&Object(_.jsxs)("div",{className:"mr__reset-popup",children:[Object(_.jsx)("p",{children:"Are you sure?"}),Object(_.jsxs)("div",{className:"mr__popup-btns",children:[Object(_.jsx)("button",{onClick:function(){I(!1)},children:"No"}),Object(_.jsx)("button",{onClick:function(){var e=h;c.map((function(t){var c=t._id;return u.a.post("/users/reset".concat(e,"/").concat(c)).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))})),window.location.reload()},children:"Yes"})]})]}),Object(_.jsx)("div",{className:"workers__container",style:{overflowX:"scroll"},children:Object(_.jsx)("div",{className:"workers__content",children:Object(_.jsx)("div",{children:Object(_.jsxs)("table",{id:"monthlyReport",className:"workers__table",children:[Object(_.jsx)("thead",{className:"mr__content-header",children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{style:{marginRight:"190px"},children:"Name"}),Object(_.jsx)("td",{style:{marginRight:"120px"},children:"Type"}),Object(_.jsx)("td",{style:{marginRight:"105px"},children:"Site"}),Object(_.jsx)("td",{style:{marginRight:"100px"},children:"Phone"}),Object(_.jsx)("td",{style:{marginRight:"120px"},children:"DOJ"}),Object(_.jsx)("td",{style:{marginRight:"100px"},children:"UAN No"}),Object(_.jsx)("td",{style:{marginRight:"100px"},children:"PF No"}),Object(_.jsx)("td",{style:{marginRight:"110px"},children:"ESIC"}),Object(_.jsx)("td",{children:"Presesnt Days"}),Object(_.jsx)("td",{style:{marginRight:"110px"},children:"OT Hours"}),Object(_.jsx)("td",{style:{marginRight:"110px"},children:"Wages Rate"}),Object(_.jsx)("td",{children:"DA/SA Rate"}),Object(_.jsx)("td",{children:"OT Rate"}),Object(_.jsx)("td",{style:{marginRight:"120px"},children:"Basic Wages"}),Object(_.jsx)("td",{children:"DA Wages"}),Object(_.jsx)("td",{style:{marginRight:"110px"},children:"OT Amt"}),Object(_.jsx)("td",{style:{marginRight:"100px"},children:"HRA"}),Object(_.jsx)("td",{style:{marginRight:"105px"},children:"Total Wages"}),Object(_.jsx)("td",{children:"PF"}),Object(_.jsx)("td",{style:{marginRight:"100px"},children:"ESIC"}),Object(_.jsx)("td",{children:"PT"}),Object(_.jsx)("td",{children:"LWF"}),Object(_.jsx)("td",{style:{marginRight:"120px"},children:"Other Deduction"}),Object(_.jsx)("td",{style:{marginRight:"105px"},children:"Total Deduction"}),Object(_.jsx)("td",{style:{marginRight:"105px"},children:"Payment"}),Object(_.jsx)("td",{style:{marginRight:"100px"},children:"Bank"}),Object(_.jsx)("td",{style:{marginRight:"140px"},children:"Acc No"}),Object(_.jsx)("td",{style:{marginRight:"120px"},children:"IFSC"}),Object(_.jsx)("td",{style:{marginRight:"5px"},children:"Aadhar No"})]})}),Object(_.jsx)("div",{style:{overflowY:"scroll",height:"440px",marginRight:"20px"},children:Object(_.jsxs)("tbody",{children:[c.map((function(e){for(var t,c,n,s,a,r,l,o,j,d,b,h,u,x,p,O,m,f,g=0;g<(null===i||void 0===i?void 0:i.length);g++)i[g][1]===e._id&&(f=i[g][0]);return P+=null===(t=f)||void 0===t?void 0:t.fPay,Object(_.jsxs)("tr",{className:"mr__content-worker",children:[Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"75px",justifyContent:"flex-start"},children:Object(_.jsx)("p",{children:e.name})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"36px"},children:Object(_.jsx)("p",{children:e.type})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"20px"},children:Object(_.jsx)("p",{children:"NA"===(null===(c=f)||void 0===c?void 0:c.site)?e.site:null===(n=f)||void 0===n?void 0:n.site})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"15px"},children:Object(_.jsx)("p",{children:e.phoneNo})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"50px"},children:Object(_.jsx)("p",{children:e.doj.substring(0,10)})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"30px"},children:Object(_.jsx)("p",{children:e.uanNo})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"20px"},children:Object(_.jsx)("p",{children:e.pfNo})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"50px"},children:Object(_.jsx)("p",{children:e.esic})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"70px"},children:Object(_.jsx)("p",{children:null===(s=f)||void 0===s?void 0:s.presentDays})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"60px"},children:Object(_.jsx)("p",{children:null===(a=f)||void 0===a?void 0:a.otHrs})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"70px"},children:Object(_.jsx)("p",{children:e.wagesRate})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"60px"},children:Object(_.jsx)("p",{children:e.daRate})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"50px"},children:Object(_.jsx)("p",{children:e.otRate})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"80px"},children:Object(_.jsx)("p",{children:null===(r=f)||void 0===r?void 0:r.basicWages})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"40px"},children:Object(_.jsx)("p",{children:null===(l=f)||void 0===l?void 0:l.daWages})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"30px"},children:Object(_.jsx)("p",{children:null===(o=f)||void 0===o?void 0:o.otAmt})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"40px"},children:Object(_.jsx)("p",{children:null===(j=f)||void 0===j?void 0:j.hra})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"40px"},children:Object(_.jsx)("p",{children:null===(d=f)||void 0===d?void 0:d.totalWages})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"0px"},children:Object(_.jsx)("p",{children:null===(b=f)||void 0===b?void 0:b.pf})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"0px"},children:Object(_.jsx)("p",{children:null===(h=f)||void 0===h?void 0:h.esic})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"0px"},children:Object(_.jsx)("p",{children:null===(u=f)||void 0===u?void 0:u.pt})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"50px"},children:Object(_.jsx)("p",{children:null===(x=f)||void 0===x?void 0:x.lwf})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"120px"},children:Object(_.jsx)("p",{children:null===(p=f)||void 0===p?void 0:p.adv})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"80px"},children:Object(_.jsx)("p",{children:null===(O=f)||void 0===O?void 0:O.totDeduction})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"35px"},children:Object(_.jsx)("p",{children:null===(m=f)||void 0===m?void 0:m.fPay})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"25px"},children:Object(_.jsx)("p",{children:e.bank})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"70px"},children:Object(_.jsx)("p",{children:e.accountNo})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"55px"},children:Object(_.jsx)("p",{children:e.ifsc})}),Object(_.jsx)("td",{className:"mr__content-data",style:{marginRight:"50px"},children:Object(_.jsx)("p",{children:e.aadharNo})})]})})),Object(_.jsxs)("tr",{style:{left:"750px",fontWeight:"bold",fontSize:"20px"},children:["Total Amount: ",P]})]})})]})})})})]})},U=c(59),Y=c.n(U),G=c(60),q=c.n(G);var V=function(){var e=Object(n.useState)(!1),t=Object(k.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(k.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(!1),j=Object(k.a)(o,2),h=j[0],x=j[1],p=Object(n.useState)(""),O=Object(k.a)(p,2),m=O[0],f=O[1],g=Object(n.useState)(!1),v=Object(k.a)(g,2),N=v[0],w=v[1],S=Object(n.useState)([]),A=Object(k.a)(S,2),C=A[0],T=A[1],D=Object(n.useState)(""),I=Object(k.a)(D,2),L=I[0],M=I[1],E=Object(n.useState)(!1),J=Object(k.a)(E,2),P=J[0],B=J[1],W=Object(n.useState)(!1),F=Object(k.a)(W,2),z=F[0],H=F[1],U=Object(n.useState)(!1),G=Object(k.a)(U,2),V=G[0],X=G[1];function K(){return(K=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={siteName:m},e.next=4,u.a.post("/sites/addSite",c).then((function(e){x(!1),s(!0)})).catch((function(e){l(e),x(!0)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={deleteSiteVal:L},console.log(L),e.next=5,u.a.delete("/sites/deleteSite",c).then((function(e){H(!1),B(!0)})).catch((function(e){X(e),H(!0)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/sites").then((function(e){return T(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(_.jsxs)("div",{className:"cw",children:[Object(_.jsx)("div",{className:"cw__nav",children:Object(_.jsx)(y,{})}),Object(_.jsx)("div",{className:"cw__container",style:{display:"flex",justifyContent:"center",width:"40vw",alignItems:"center",height:"80vh",marginTop:"50px"},children:N?Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsxs)("button",{className:"workers__editIcon",style:{width:"50px",marginLeft:"-110px",marginTop:"-50px",display:"flex"},children:[Object(_.jsx)(q.a,{className:"workers__createIcon",onClick:function(){return w(!1)}})," "]}),Object(_.jsx)("h2",{children:"Delete a Site"}),Object(_.jsx)("h3",{children:"Site Name"}),Object(_.jsx)("div",{children:Object(_.jsxs)("select",{name:"site",value:L,onChange:function(e){return M(e.target.value)},className:"workers__dropdown",style:{width:"300px",backgroundColor:"transparent",border:"2px solid #1c243a",color:"#1c243a"},children:[Object(_.jsx)("option",{children:"-select-"}),C.map((function(e){return Object(_.jsx)("option",{children:e.siteName})}))]})}),Object(_.jsx)("button",{onClick:function(e){return Q.apply(this,arguments)},className:"cw__btn",style:{marginBottom:"10px",marginTop:"50px",border:"2px solid red",backgroundColor:"transparent",color:"red"},children:"Delete"}),P&&Object(_.jsx)(R.a,{severity:"success",children:"Site Deleted"}),z&&Object(_.jsx)(R.a,{severity:"error",children:V}),Object(_.jsx)("p",{style:{marginTop:"20px"},children:"*Refresh the page to update the site list"})]}):Object(_.jsxs)("div",{className:"att__content",children:[Object(_.jsxs)("button",{className:"workers__editIcon",style:{width:"50px",marginLeft:"350px",marginTop:"-50px",display:"flex"},children:[Object(_.jsx)(Y.a,{className:"workers__createIcon",onClick:function(){return w(!0)}})," "]}),Object(_.jsx)("h2",{children:"Add a Site"}),Object(_.jsx)("h3",{children:"Site Name"}),Object(_.jsx)("input",{type:"text",className:"cw__inp",value:m,onChange:function(e){f(e.target.value)},style:{marginBottom:"40px",height:"40px"}}),Object(_.jsx)("button",{onClick:function(e){return K.apply(this,arguments)},className:"cw__btn",style:{marginBottom:"-5px"},children:"Add Site"}),Object(_.jsx)("button",{onClick:function(){f(""),s(!1)},className:"cw__btn",style:{marginBottom:"10px",border:"2px solid #d6993c",backgroundColor:"transparent",color:"#d6993c"},children:"Add another"}),c&&Object(_.jsx)(R.a,{severity:"success",children:"Site Added"}),h&&Object(_.jsx)(R.a,{severity:"error",children:i})]})})]})};c(104);var X=Object(o.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,errMsg:e.auth.error}}),{login:function(e,t){return function(){var c=Object(b.a)(d.a.mark((function c(n){var s,a,r,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s={Name:e,Password:t},c.prev=1,c.next=4,u.a.post("/auth/adminLogin",s);case 4:a=c.sent,n({type:O,payload:a.data}),n(v()),c.next=15;break;case 9:c.prev=9,c.t0=c.catch(1),r=c.t0.response.data.errors,i="",null===r||void 0===r||r.forEach((function(e){return i=e.msg})),n({type:m,errMsg:i});case 15:case"end":return c.stop()}}),c,null,[[1,9]])})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=e.login,c=e.isAuthenticated,s=e.errMsg,a=Object(n.useState)(""),r=Object(k.a)(a,2),o=r[0],j=r[1],d=Object(n.useState)(""),b=Object(k.a)(d,2),h=b[0],u=b[1];return c?Object(_.jsx)(l.a,{to:"/"}):Object(_.jsxs)("div",{className:"login",children:[Object(_.jsx)("div",{className:"navbar__title",style:{position:"absolute",top:"10px",left:"10px"},children:Object(_.jsx)(i.b,{to:"/login",className:"nav__title",children:"Rocks & Logs"})}),Object(_.jsx)("div",{className:"login__container",children:Object(_.jsxs)("div",{className:"login__content",children:[Object(_.jsx)("h2",{children:"Hello!"}),Object(_.jsx)("p",{children:"Name"}),Object(_.jsx)("input",{value:o,onChange:function(e){e.preventDefault(),j(e.target.value)},type:"text",required:!0}),Object(_.jsx)("p",{children:"Password"}),Object(_.jsx)("input",{value:h,onChange:function(e){e.preventDefault(),u(e.target.value)},type:"password",required:!0}),Object(_.jsx)("button",{onClick:function(e){e.preventDefault(),t(o,h)},className:"login__btn",children:"Login"}),null!=s&&Object(_.jsx)(R.a,{style:{marginTop:"10px"},severity:"error",children:s})]})})]})})),K=c(18),Q=c(63),Z=["component","auth"];var $=Object(o.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,c=e.auth,n=c.isAuthenticated,s=(c.loading,Object(Q.a)(e,Z));return Object(_.jsx)(l.b,Object(K.a)(Object(K.a)({},s),{},{render:function(e){return n?Object(_.jsx)(t,Object(K.a)({},e)):Object(_.jsx)(l.a,{to:"/login"})}}))})),ee=c(32),te=c(61),ce=c(62),ne={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,admin:null,error:null};var se=Object(ee.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload,s=t.errMsg;switch(c){case x:return Object(K.a)(Object(K.a)({},e),{},{isAuthenticated:!0,loading:!1,admin:n,error:null});case O:return localStorage.setItem("token",n.token),Object(K.a)(Object(K.a)(Object(K.a)({},e),n),{},{isAuthenticated:!0,loading:!1,error:null});case p:case m:case f:return Object(K.a)(Object(K.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,admin:null,error:s});default:return e}}}),ae=[ce.a],re=Object(ee.createStore)(se,{},Object(te.composeWithDevTools)(ee.applyMiddleware.apply(void 0,ae))),ie=re.getState();re.subscribe((function(){var e=ie;if(ie=re.getState(),e.auth.token!==ie.auth.token){var t=ie.auth.token;g(t)}}));var le=re;var oe=function(){return Object(n.useEffect)((function(){localStorage.token&&g(localStorage.token),le.dispatch(v()),window.addEventListener("storage",(function(){localStorage.token||le.dispatch({type:f})}))}),[]),Object(_.jsx)(o.a,{store:le,children:Object(_.jsx)(i.a,{children:Object(_.jsxs)(l.d,{children:[Object(_.jsx)($,{path:"/monthly-report",exact:!0,component:H}),Object(_.jsx)($,{path:"/add-site",exact:!0,component:V}),Object(_.jsx)($,{path:"/workers",exact:!0,component:W}),Object(_.jsx)($,{path:"/create-worker",exact:!0,component:S}),Object(_.jsx)(l.b,{path:"/login",exact:!0,component:X}),Object(_.jsx)($,{exact:!0,path:"/",component:w})]})})})},je=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,123)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(oe,{})}),document.getElementById("root")),je()},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[105,1,2]]]);
//# sourceMappingURL=main.92ce2e0e.chunk.js.map